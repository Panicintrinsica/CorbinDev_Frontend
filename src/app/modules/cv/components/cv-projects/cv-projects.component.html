<div class="section-wrapper">
  <div class="subsection">

    <div class="textBanner">Projects
      <div class="fill"></div>
      <button mat-button color="primary" (click)="editProjectList()">Edit</button>
    </div>

    <div class="info-block" cdkDropList (cdkDropListDropped)="projectDrop($event)">
      @for (project of displayedProjects; track project.id){
        <div class="cv-project" cdkDrag cdkDragPreviewContainer="parent">
          <div class="cv-project-title-row draggable" cdkDragHandle>

            <div class="cv-project-name">{{project.name}}</div>

            <div class="cv-project-title">{{project.role}}</div>

            <div class="cv-project-dates">
              @if (diffYear(project.started, project.ended)) {
                {{project.started | date:"MMM. yyyy" }}
              } @else {
                {{project.ended | date:"MMM." }}
              }
              @if(project.started && project.ended){
                <span class="dateDivider"> - </span>
              }
              {{project.ended | date:"MMM. yyyy" }}
            </div>
          </div>

          <div class="cv-project-content" [innerHTML]="project.shortDescription"></div>

          <div class="cv-project-meta">
            <div class="item stack">
              @if (project.showLink) {
                <span class="label">Link: </span>
                <a [href]="project.link">{{project.link}}</a>
                <span class="wide divider">|</span>
              }
              <span class="label">Skills: </span>
              @for (usedSkill of project.skills; track usedSkill) {
                <span class="line-item" >{{usedSkill}}</span>
              }
            </div>
          </div>
        </div>
      }
    </div>

  </div>
</div>
